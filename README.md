# mvc-framework

ДЗ 6. Router

Part 1

Написать компонент Routing.

1. Добавить класс Router, реализующий интерфейс RouteInterface и написать метод route.

Этот метод будет получать строку запроса, разбивать ее на составные части и по ним определять контроллер, действие (action) и параметры запроса.

Принцип разбивки следующий:

Первая часть пути - название контроллера.

Вторая часть пути - название действия.

Следующие пары - название и значение параметра.

То есть схема такая

http://[domain]/[controller]/[action]/[param_name]/[param_value]

Например:

http://my-site.loc/page/view/id/123

В этом случае контроллер - page, действие - view, параметры - ["id" => 123].



В приложении метод route класса Router будет вызываться приложением и по результатам работы роутера, приложение будет знать кого ему следует вызывать дальше (какой контроллер и какой его метод)



Part 2

1. В учебном проекте, в момент инициализации класса Application передать ему свой роутер параметром в конструктор.

2. Написать собственный контроллер и "заставить" его работать со своим роутером. 

В примере выше по результатам работы роутера должен быть создан объект app\Controllers\Page (или PageController) и вызван его метод view, а также этому методу будут переданы параметры ["id" => 123]



Дополнительно (по желанию):

Сделать роутер конфигурируемым. Это позволит отвязаться от жесткого формата урлов и можно будет любым урлам назначать любые действия. В этом случае можно сделать или 2 класса, с одним и тем же интерфейсом, или только конфигурируемый вариант.



P.S. Обратите внимание на передачу параметров методу контроллера. Мы пока не умеем определять какие параметры (имена параметров) ожидает конкретный метод, потому вариант ["id" => 123] можно передать как массив, т.е. метод контроллера может принмать ассоциативный массив, типа array $data = [].

P.P.S. Еще такой момент, в моем интерфесе возвращаемое значение метода route долно быть callable (то что можно вызвать), но вызывать его будет не роутер, а некий код, получивший этот callable. И у вас может возникнуть проблема с переменными из другой области видимости. Если такое произойдет, используйте анонимные функции с use. Или обращайтесь за помощью. Это выходит за рамки текущей темы, но будет хорошая практическая работа по пройденной ранее теме, касающейся callable-ов. Это похоже на колбеки, только в обратном порядке - в виде не передаваемого, а возвращаемого значения.
